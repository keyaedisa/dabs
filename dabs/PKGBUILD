# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Maintainer: Your Name <keyaedisa>
pkgname="dabs"
pkgver=3.3
pkgrel=3
epoch=
pkgdesc="dev abs builds"
arch=('x86_64')
url="https://github.com/keyaedisa/abd"
#license=('')
#groups=()
depends=("git"
		"gawk"
		"sed"
		"archiso"
		"bash")
makedepends=('git')
#checkdepends=()
#optdepends=()
provides=('dabs')
#conflicts=('')
#replaces=('absd')
#backup=()
#options=()
install=dabs.install
#changelog=
source=("git+ssh://git@github.com/keyaedisa/abd.git/dabs/")
#noextract=()
#md5sums=()
sha256sums=('SKIP')

package() {
	mkdir -p "${pkgdir}/usr/local/bin/"
	cp "${srcdir}/absd" "${pkgdir}/usr/local/bin/absd"
	mkdir -p "${pkgdir}/etc/absd/"
	cp -rf "${srcdir}/misc/" "${pkgdir}/etc/absd/"
	cp -rf "${srcdir}/options/" "${pkgdir}/etc/absd/"
	cp "${srcdir}/options/.options" "${pkgdir}/etc/absd/"
	rm -r "../gc"
	rm -r "${srcdir}"

	if [[ ${pkgname} == "abs" ]]; then
		sed -i  "0,/version/s/.*version.*/version=${pkgver}-${pkgrel}/" "${pkgdir}/etc/abs/misc/.formatting"
 	elif [[ ${pkgname} == "absd" ]]; then
 		sed -i  "0,/version/s/.*version.*/version=${pkgver}-${pkgrel}/" "${pkgdir}/etc/abs/misc/.formatting"
 	else
		echo "hey bb"
 	fi

}


